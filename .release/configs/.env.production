# LLM Governance Dashboard - Production Environment Configuration
# Version: 1.0.0
# IMPORTANT: This is a template. DO NOT use these values in production!

# ======================
# Application Settings
# ======================
NODE_ENV=production
RUST_LOG=info
APP_NAME="LLM Governance Dashboard"

# ======================
# Database Configuration
# ======================
# PostgreSQL - Main Database
DATABASE_URL=postgresql://llm_gov_user:CHANGE_THIS_PASSWORD@postgres:5432/llm_governance

# Individual Service Databases (if using separate databases)
AUTH_DATABASE_URL=postgresql://llm_gov_user:CHANGE_THIS_PASSWORD@postgres:5432/llm_governance_auth
USER_DATABASE_URL=postgresql://llm_gov_user:CHANGE_THIS_PASSWORD@postgres:5432/llm_governance_users
POLICY_DATABASE_URL=postgresql://llm_gov_user:CHANGE_THIS_PASSWORD@postgres:5432/llm_governance_policies
AUDIT_DATABASE_URL=postgresql://llm_gov_user:CHANGE_THIS_PASSWORD@postgres:5432/llm_governance_audit
METRICS_DATABASE_URL=postgresql://llm_gov_user:CHANGE_THIS_PASSWORD@postgres:5432/llm_governance_metrics
COST_DATABASE_URL=postgresql://llm_gov_user:CHANGE_THIS_PASSWORD@postgres:5432/llm_governance_cost

# Database Pool Settings
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=50
DATABASE_TIMEOUT=30

# ======================
# Redis Configuration
# ======================
REDIS_URL=redis://:CHANGE_THIS_REDIS_PASSWORD@redis:6379
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5

# Session Configuration
SESSION_TTL=1800  # 30 minutes in seconds
SESSION_REFRESH_THRESHOLD=300  # 5 minutes

# ======================
# Security Configuration
# ======================
# JWT Settings - CRITICAL: Generate secure secrets!
# Use: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_AT_LEAST_32_CHARS
JWT_ACCESS_TOKEN_EXPIRY=900  # 15 minutes in seconds
JWT_REFRESH_TOKEN_EXPIRY=604800  # 7 days in seconds

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Account Security
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=900  # 15 minutes in seconds

# ======================
# OAuth2 Configuration
# ======================
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=CHANGE_THIS_GOOGLE_SECRET
GOOGLE_REDIRECT_URI=https://your-domain.com/api/v1/auth/oauth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=CHANGE_THIS_GITHUB_SECRET
GITHUB_REDIRECT_URI=https://your-domain.com/api/v1/auth/oauth/github/callback

# ======================
# MFA Configuration
# ======================
MFA_ISSUER="LLM Governance Dashboard"
MFA_ENABLED=true
BACKUP_CODES_COUNT=10

# ======================
# Service Configuration
# ======================
# API Gateway
API_GATEWAY_HOST=0.0.0.0
API_GATEWAY_PORT=8080

# Auth Service
AUTH_SERVICE_HOST=0.0.0.0
AUTH_SERVICE_PORT=8081

# User Service
USER_SERVICE_HOST=0.0.0.0
USER_SERVICE_PORT=8082

# Policy Service
POLICY_SERVICE_HOST=0.0.0.0
POLICY_SERVICE_PORT=8083

# Audit Service
AUDIT_SERVICE_HOST=0.0.0.0
AUDIT_SERVICE_PORT=8084

# Metrics Service
METRICS_SERVICE_HOST=0.0.0.0
METRICS_SERVICE_PORT=8085

# Cost Service
COST_SERVICE_HOST=0.0.0.0
COST_SERVICE_PORT=8086

# Integration Service
INTEGRATION_SERVICE_HOST=0.0.0.0
INTEGRATION_SERVICE_PORT=8087

# Frontend
FRONTEND_HOST=0.0.0.0
FRONTEND_PORT=3000

# ======================
# Service URLs (Internal)
# ======================
AUTH_SERVICE_URL=http://auth-service:8081
USER_SERVICE_URL=http://user-service:8082
POLICY_SERVICE_URL=http://policy-service:8083
AUDIT_SERVICE_URL=http://audit-service:8084
METRICS_SERVICE_URL=http://metrics-service:8085
COST_SERVICE_URL=http://cost-service:8086
INTEGRATION_SERVICE_URL=http://integration-service:8087

# ======================
# LLM Provider API Keys
# ======================
# OpenAI
OPENAI_API_KEY=sk-CHANGE_THIS_OPENAI_KEY
OPENAI_ORG_ID=org-CHANGE_THIS_IF_APPLICABLE

# Anthropic
ANTHROPIC_API_KEY=sk-ant-CHANGE_THIS_ANTHROPIC_KEY

# Google (Gemini)
GOOGLE_AI_API_KEY=CHANGE_THIS_GOOGLE_AI_KEY

# Azure OpenAI
AZURE_OPENAI_API_KEY=CHANGE_THIS_AZURE_KEY
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_DEPLOYMENT=your-deployment-name

# ======================
# Rate Limiting
# ======================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=60  # seconds
RATE_LIMIT_MAX_REQUESTS=100  # requests per window per user

# IP-based rate limiting (fallback for unauthenticated)
RATE_LIMIT_IP_WINDOW=60
RATE_LIMIT_IP_MAX_REQUESTS=20

# ======================
# CORS Configuration
# ======================
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
CORS_MAX_AGE=3600

# ======================
# Monitoring & Logging
# ======================
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Logging
LOG_LEVEL=info
LOG_FORMAT=json  # json or pretty
LOG_FILE=/var/log/llm-governance/app.log
LOG_ROTATION=daily
LOG_MAX_SIZE=100M
LOG_MAX_AGE=30  # days

# OpenTelemetry (Optional)
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317
OTEL_SERVICE_NAME=llm-governance-dashboard

# ======================
# Email Configuration (for notifications)
# ======================
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=notifications@your-domain.com
SMTP_PASSWORD=CHANGE_THIS_SMTP_PASSWORD
SMTP_FROM=noreply@your-domain.com
SMTP_FROM_NAME="LLM Governance Dashboard"
SMTP_TLS=true

# ======================
# Backup Configuration
# ======================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # 2 AM daily
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_ENCRYPTION_KEY=CHANGE_THIS_BACKUP_ENCRYPTION_KEY

# ======================
# Performance Tuning
# ======================
# Worker Threads
WORKER_THREADS=4

# Request Timeouts
REQUEST_TIMEOUT=30  # seconds
POLICY_EVALUATION_TIMEOUT=5  # seconds

# Connection Timeouts
HTTP_CONNECT_TIMEOUT=10
HTTP_READ_TIMEOUT=30

# ======================
# Feature Flags
# ======================
FEATURE_MFA_ENABLED=true
FEATURE_OAUTH_ENABLED=true
FEATURE_COST_TRACKING=true
FEATURE_AUDIT_EXPORT=true
FEATURE_ADVANCED_ANALYTICS=true

# ======================
# Security Headers
# ======================
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000  # 1 year
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';"

# ======================
# Maintenance Mode
# ======================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."

# ======================
# Admin Configuration
# ======================
DEFAULT_ADMIN_EMAIL=admin@your-domain.com
DEFAULT_ADMIN_PASSWORD=CHANGE_THIS_ADMIN_PASSWORD
DEFAULT_ADMIN_NAME="System Administrator"

# ======================
# Audit Configuration
# ======================
AUDIT_LOG_RETENTION_DAYS=365  # 1 year minimum for compliance
AUDIT_CHECKSUM_ENABLED=true
AUDIT_EXPORT_MAX_RECORDS=10000

# ======================
# Cost Tracking
# ======================
COST_CURRENCY=USD
COST_DECIMAL_PLACES=4
BUDGET_ALERT_THRESHOLD=0.8  # 80% of budget
BUDGET_NOTIFICATION_ENABLED=true

# ======================
# TimescaleDB Configuration
# ======================
TIMESCALEDB_CHUNK_INTERVAL=1 day
TIMESCALEDB_RETENTION_DAYS=730  # 2 years
TIMESCALEDB_COMPRESSION_ENABLED=true
TIMESCALEDB_COMPRESSION_AFTER=7 days

# ======================
# Circuit Breaker
# ======================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=30
CIRCUIT_BREAKER_RESET_TIMEOUT=60

# ======================
# Health Check
# ======================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30  # seconds

# ======================
# Environment Info
# ======================
ENVIRONMENT=production
VERSION=1.0.0
BUILD_DATE=2025-11-16

# ======================
# NOTES
# ======================
# 1. Change ALL "CHANGE_THIS_*" values before deploying
# 2. Generate secure random strings for secrets using: openssl rand -base64 32
# 3. Never commit this file with real credentials to version control
# 4. Use environment-specific secret management (Vault, AWS Secrets Manager, etc.)
# 5. Review and adjust resource limits based on your infrastructure
# 6. Enable and configure monitoring/alerting before going live
# 7. Test backup and restore procedures regularly
# 8. Review security settings and adjust based on your requirements
